<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>VPS on 电子荒原</title>
    <link>http://localhost:1313/tags/vps/</link>
    <description>Recent content in VPS on 电子荒原</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <copyright>&amp;copy;召唤兽，&lt;a href=&#34;https://creativecommons.org/licenses/by-nc/4.0/&#34;&gt;CC BY-NC 4.0&lt;/a&gt;</copyright>
    <lastBuildDate>Sun, 22 Sep 2019 20:54:15 +0800</lastBuildDate>
    
	<atom:link href="http://localhost:1313/tags/vps/feed.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>自动输入剪贴板中的内容</title>
      <link>http://localhost:1313/2019/09/22/klipper-autotype/</link>
      <pubDate>Sun, 22 Sep 2019 20:54:15 +0800</pubDate>
      
      <guid>http://localhost:1313/2019/09/22/klipper-autotype/</guid>
      <description>&lt;blockquote&gt;
&lt;p&gt;值此佳节之际，为了给伟大祖国献礼，让几个VPS炸成烟花是必不可少的庆祝活动。于是，我搭在Google Cloud Platform上的V2RAY理所当然地连不上了。&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;正好上次薅的羊毛也快要过期了，又到了交保护费的时间。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;其实之前我有两页关于VPS（价格）的笔记，不过计划赶不上变化，今天看到了一个叫Veesp的公司，很便宜，而且速度居然也还不错。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;惟一的缺点是，&lt;del&gt;我买不到红墨水&lt;/del&gt;那里的终端noVNC不支持粘贴。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;以上是（无关紧要的）背景。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;details&gt;
&lt;summary&gt;
  &lt;h4 class=&#34;inline&#34;&gt;
    附：Veesp的测速情况
  &lt;/h4&gt;
&lt;/summary&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/img/veesp-speedtest.png&#34; alt=&#34;北京联通表示情绪稳定&#34;&gt;&lt;/p&gt;
&lt;/details&gt;
&lt;p&gt;针对noVNC的问题，根据&lt;a href=&#34;https://forum.proxmox.com/threads/novnc-copy-paste-not-works.19773/#post-101013&#34;&gt;这个帖子&lt;/a&gt;，可以用&lt;code&gt;xdotool&lt;/code&gt;来解决。&lt;/p&gt;
&lt;p&gt;现在我用的KDE自带剪贴板管理程序&lt;code&gt;Klipper&lt;/code&gt;，能够配置自定义动作处理剪贴板中的内容。这里的动作是&lt;code&gt;xdotool type &#39;%s&#39;&lt;/code&gt;，如图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/img/klipper.png&#34; alt=&#34;setting&#34;&gt;&lt;/p&gt;
&lt;p&gt;另外，在我这里&lt;code&gt;在当前剪贴板上手动执行动作&lt;/code&gt;的快捷键&lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;R&lt;/kbd&gt;似乎有冲突，我改成了&lt;kbd&gt;Ctrl+Shift+Alt+R&lt;/kbd&gt;。&lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;之后在noVNC界面上按刚才的快捷键就行。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;来自19-10-4的更新：俄罗斯IP被某个熊猫网站（e-h）屏蔽了……我就随口一说。&lt;/p&gt;
&lt;div class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34;&gt;
&lt;p&gt;具体地说，是在北京联通的4G网络，协议是WS+TLS，而且并不是永封，截至发稿前又可以连接了。在同个服务器上的$$被封得更彻底一些。&amp;#160;&lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:2&#34;&gt;
&lt;p&gt;其实我还有点期待&lt;code&gt;&amp;lt;kbd&amp;gt;&lt;/code&gt;标签能出个什么特殊格式呢……&amp;#160;&lt;a href=&#34;#fnref:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>VPS初始化checklist</title>
      <link>http://localhost:1313/2017/11/25/2017-11-25-virmach-init/</link>
      <pubDate>Sat, 25 Nov 2017 12:35:54 +0800</pubDate>
      
      <guid>http://localhost:1313/2017/11/25/2017-11-25-virmach-init/</guid>
      <description>&lt;p&gt;仅供存档。另外，virmach黑五大减价了，KVM主机5.6$一年美滋滋。&lt;/p&gt;
&lt;p&gt;这是我的邀请链接：&lt;a href=&#34;https://billing.virmach.com/aff.php?aff=3032&#34;&gt;https://billing.virmach.com/aff.php?aff=3032&lt;/a&gt;，优惠码是&lt;code&gt;2017BFSAVE20&lt;/code&gt;。&lt;/p&gt;
&lt;h2 id=&#34;新建用户&#34;&gt;新建用户&lt;/h2&gt;
&lt;p&gt;感谢&lt;a href=&#34;https://blog.roadofgrowth.com/2015/04/28/e6-96-b0-e8-b4-advps-e5-88-9d-e5-a7-8b-e5-8c-96-e5-ae-89-e5-85-a8-e9-85-8d-e7-bd-ae/&#34;&gt;https://blog.roadofgrowth.com/2015/04/28/e6-96-b0-e8-b4-advps-e5-88-9d-e5-a7-8b-e5-8c-96-e5-ae-89-e5-85-a8-e9-85-8d-e7-bd-ae/&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;adduser hh
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;gpasswd -a hh sudo
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;添加ssh-key验证并禁用root用户ssh远程登录&#34;&gt;添加SSH-KEY验证并禁用root用户SSH远程登录&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;su - hh
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mkdir .ssh
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;chmod 700 .ssh
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;vi .ssh/authorized_keys
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;在这里粘贴你的公钥。什么？noVNC无法粘贴？我写了篇&lt;a href=&#34;http://localhost:1313/2019/09/22/klipper-autotype/&#34;&gt;博文&lt;/a&gt;来解决这个。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;#vi /etc/ssh/sshd_config
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;PermitRootLogin no
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;PasswordAuthentication no
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Port 22222
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo systemctl restart ssh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;安装配置防火墙-ufw&#34;&gt;安装配置防火墙 (ufw)&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo apt-get update&amp;amp;&amp;amp;sudo apt-get upgrade
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo apt-get install ufw
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo ufw allow 22222 #允许SSH
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo ufw enable
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;安装vim&#34;&gt;安装vim&lt;/h2&gt;
&lt;h2 id=&#34;安装shadowsocks-libev&#34;&gt;安装shadowsocks-libev&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo sh -c &amp;#39;printf &amp;#34;deb http://httpredir.debian.org/debian jessie-backports main&amp;#34; &amp;gt; /etc/apt/sources.list.d/jessie-backports.list&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo apt update
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo apt -t jessie-backports install shadowsocks-libev
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo vim /etc/shadowsocks-libev/config.json
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo ufw allow &amp;lt;PORT&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo systemctl start shadowsocks-libev
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo systemctl enable shadowsocks-libev
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;安装4x内核&#34;&gt;安装4.x内核&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo apt-get install -t jessie-backports linux-image-amd64
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo update-grub
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;启用bbr&#34;&gt;启用BBR&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/iMeiji/shadowsocks_install/wiki/%E5%BC%80%E5%90%AFTCP-BBR%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%AE%97%E6%B3%95#%E5%BC%80%E5%90%AFbbr&#34;&gt;https://github.com/iMeiji/shadowsocks_install/wiki/%E5%BC%80%E5%90%AFTCP-BBR%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%AE%97%E6%B3%95#%E5%BC%80%E5%90%AFbbr&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>shadowsocks，ipv6和便宜的VPS，还有OpenVPN</title>
      <link>http://localhost:1313/2015/01/07/shadowsocks%EF%BC%8Cipv6%E5%92%8C%E4%BE%BF%E5%AE%9C%E7%9A%84vps/</link>
      <pubDate>Wed, 07 Jan 2015 15:05:56 +0000</pubDate>
      
      <guid>http://localhost:1313/2015/01/07/shadowsocks%EF%BC%8Cipv6%E5%92%8C%E4%BE%BF%E5%AE%9C%E7%9A%84vps/</guid>
      <description>&lt;p&gt;那个……我还活着呢。&lt;/p&gt;
&lt;p&gt;前几天睡不着的时候翻了一下这个博客，最后发布时间是去年的5月份。七个月的话应该是很多草本植物的一生了吧？幸好这里种的是树。&lt;/p&gt;
&lt;p&gt;……算了过几天写一页年终总结来写这些充满腐烂气息的东西吧。今天是正经的技术环节，当然是剪切链接形式的技术。&lt;/p&gt;
&lt;p&gt;那么首先是VPS，用的是便宜的&lt;a href=&#34;https://bandwagonhost.com/aff.php?aff=1656&#34;&gt;Bandwagon&lt;/a&gt;（搬瓦工），因为穷，只买了64M内存的版本；因为没有信用卡（穷），用不了paypal，于是去淘宝找了一家代购，入手价格29￥/年。&lt;/p&gt;
&lt;p&gt;然后是shadowsocks，按照&lt;a href=&#34;https://github.com/shadowsocks/shadowsocks/wiki/Shadowsocks-%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E&#34;&gt;这里&lt;/a&gt;的办法安装。根据&lt;a href=&#34;http://blog.robotshell.org/2014/about-shadowsocks/&#34;&gt;这里&lt;/a&gt;的说法，就用python版的服务端就好。&lt;/p&gt;
&lt;p&gt;为了看起来像是技术文档的样子，下面是&lt;code&gt;/etc/shadowsocks.json&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{
    &amp;quot;server&amp;quot;:[&amp;quot;[::0]&amp;quot;,&amp;quot;0.0.0.0&amp;quot;],
    &amp;quot;server_port&amp;quot;:443,
    &amp;quot;local_address&amp;quot;: &amp;quot;127.0.0.1&amp;quot;,
    &amp;quot;local_port&amp;quot;:1080,
    &amp;quot;password&amp;quot;:&amp;quot;******&amp;quot;,
    &amp;quot;timeout&amp;quot;:300,
    &amp;quot;method&amp;quot;:&amp;quot;aes-256-cfb&amp;quot;,
    &amp;quot;fast_open&amp;quot;: false
}
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;update150208: “server” 行只写::0的话就是纯v6连接了……&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;最后是ipv6，在he.net申请tunnel breaker，因为便宜的VPS动不了内核，于是用&lt;a href=&#34;https://github.com/heyeshuang/tb-tun/&#34;&gt;TB-TUN&lt;/a&gt;弄一个用户态隧道，见~~&lt;a href=&#34;http://www.yangyaping.cn/2014/08/21/ipv6tunnel/&#34;&gt;这里&lt;/a&gt;~~&lt;a href=&#34;http://daili.ml/centos_shadowsocks_ipv6.html&#34;&gt;这里&lt;/a&gt;和&lt;a href=&#34;http://ichon.me/post/659.html&#34;&gt;这里&lt;/a&gt;，还有init.d的&lt;a href=&#34;http://www.cybermilitia.net/2013/07/22/ipv6-tunnel-on-openvz/&#34;&gt;自启动脚本&lt;/a&gt;。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;update150409:
增加一个&lt;a href=&#34;https://github.com/rejsmont/ustun&#34;&gt;UStun&lt;/a&gt;的链接；更换了Googlecode的链接&lt;/p&gt;
&lt;p&gt;&lt;del&gt;Google带着小姨子code跑了！你王八蛋！你还我血汗码！&lt;/del&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;另外，chrome的&lt;a href=&#34;https://chrome.google.com/webstore/detail/secure-shell/pnhechapfaindjhompbnflcldabbghjo/related?utm_source=chrome-app-launcher-info-dialog&#34;&gt;SSH&lt;/a&gt;很好用，可以算是&lt;em&gt;刚换电脑还没有买SSD装arch的人&lt;/em&gt;的福音。&lt;/p&gt;
&lt;p&gt;update：听说libev版本的可以节省内存，安装方法在&lt;a href=&#34;https://github.com/shadowsocks/shadowsocks-libev#debian--ubuntu&#34;&gt;这里&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;update2：从&lt;a href=&#34;https://github.com/shadowsocks/shadowsocks/wiki/Connect-to-OpenVPN-over-Shadowsocks&#34;&gt;这里&lt;/a&gt;看到可以在shadowsocks上飞OPENVPN，于是：&lt;/p&gt;
&lt;p&gt;在服务器运行这个：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;wget git.io/vpn --no-check-certificate -O openvpn-install.sh; bash openvpn-install.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后设中转：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;iptables -A INPUT -s 10.8.0.0/24 -j ACCEPT
iptables -I FORWARD 1 -s 10.8.0.0/24 -j ACCEPT
iptables -I FORWARD 2 -d 10.8.0.0/24 -j ACCEPT
iptables -I FORWARD 3 -j LOG --log-prefix &amp;quot;FORWARD-LOG &amp;quot;
iptables -I FORWARD 4 -j DROP
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;把在&lt;code&gt;/root/&lt;/code&gt;生成的&lt;code&gt;.ovpn&lt;/code&gt;文件复制到本机，这时我发现chrome并没有自带SCP……&lt;/p&gt;
&lt;p&gt;在得到的&lt;code&gt;.ovpn&lt;/code&gt;文件里加两行：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;socks-proxy 127.0.0.1 1080
route [SHADOWSOCKS服务器地址] 255.255.255.255 net_gateway
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;然后去下&lt;a href=&#34;https://openvpn.net/index.php/open-source/downloads.html&#34;&gt;客户端&lt;/a&gt;，不要手贱点xp版本，否则今天下午就没空写作业了~&lt;/p&gt;
&lt;p&gt;如果windows的shadowsocks客户端支持UDP转发的话，这里就是终点了，否则，请将本机和服务端的&lt;code&gt;.ovpn&lt;/code&gt;文件（&lt;code&gt;etcopenvpnserver.ovpn&lt;/code&gt;）修改为tcp模式。&lt;/p&gt;
&lt;p&gt;8.23：谨以此博文对领路人致敬。身处寒夜，你们为我们带来了微光。&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>